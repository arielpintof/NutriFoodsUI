@page "/distribution"
@using NutriFoods_UI.Data.Enums
@using NutriFoods_UI.Data.Store
@using Fluxor
@inherits Fluxor.Blazor.Web.Components.FluxorComponent

<div class="px-3 mb-4">
    <MacronutrientIntake MacroType="MacroTypeEnum.Carb"></MacronutrientIntake>
    <MudDivider  Class="mb-5 mt-2"/>
    <MacronutrientIntake MacroType="MacroTypeEnum.Protein"></MacronutrientIntake>
    <MudDivider  Class="mb-5 mt-2"/>
    <MacronutrientIntake MacroType="MacroTypeEnum.Lipid"></MacronutrientIntake>
    
    <div class="mt-5">
        <MudButton OnClick="ButtonHandler"
                   StartIcon="@Icons.Material.Filled.RemoveRedEye"
                   ButtonType="ButtonType.Button"
                   Variant="Variant.Text"
                   Color="Color.Primary"
                   Size="Size.Small"
                   Style="text-transform: none; font-family: 'Plus Jakarta Sans', sans-serif; font-weight: 700;">
            @ButtonText
        </MudButton>
        @if (Active)
        {
            <span>Carbs: @MoleculaState.Value.CarbTarget</span>
            <span>Protein: @MoleculaState.Value.ProteinTarget</span>
            <span>Lipid: @MoleculaState.Value.LipidTarget</span>
            <MacroChart></MacroChart> 
        }
    </div>
</div>





@code {

    [Inject]
    private IState<MoleculaState> MoleculaState { get; set; } = null!;
    
    private string ButtonText { get; set; } = "Ver gráfico";

    private bool Active { get; set; } = false;

    private void ButtonHandler()
    {
        Active = !Active;
        ButtonText = Active ? "Ocultar gráfico" : "Ver gráfico";
        StateHasChanged();
    }

}