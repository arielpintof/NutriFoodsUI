@page "/macro"
@using NutriFoods_UI.Data.Enums
@using Fluxor
@using NutriFoods_UI.Data.Store
@using NutriFoods_UI.Pages

<div class="d-flex  justify-space-between">
    <div class="d-flex flex-column gap-1" style="width: 20%">
        <span>@MacroType.ReadableName</span>
        <p>Lorem ipsum dolor sit amet</p>
    </div>
    <div class="d-flex gap-3 mx-1 align-end mb-1" style="width: 50%">
        <div class="d-flex flex-column mud-width-full">
            <label class="form-label">Distribución</label>
            <MudSlider Size="Size.Medium" @bind-Value="MacroValueHandler" ValueLabel="true"
                       Variant="Variant.Filled" Min="0" Max="3" Step="0.1"
                       Class="mt-2 ">
            </MudSlider>
        </div>
        <div>
            <i class="fas fa-dollar-sign trailing"></i>
            <input class="custom form-control " type="number" min="0" max="3" step="0.1"
                   @bind="MacroValueHandler" inputmode="numeric">
        </div>
    </div>
</div>


@code {

    [Parameter]
    public MacroTypeEnum MacroType { get; set; } = null!;

    [Parameter]
    public double PatientWeight { get; set; }

    private double _macroValue;

    private double MacroValueHandler
    {
        get => _macroValue;
        set
        {
            if (_macroValue == value) return;
            _macroValue = value;
            var action = new ChangeMoleculaAction(_macroValue, MacroType);
            Dispatcher.Dispatch(action);
        }
    }

    [Inject]
    private IState<MoleculaState> MoleculeState { get; set; } = null!;

    [Inject]
    public IDispatcher Dispatcher { get; set; } = null!;

}

