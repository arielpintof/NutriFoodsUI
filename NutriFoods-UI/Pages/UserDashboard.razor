@page "/user-dashboard"
@page "/patients/profile/{PatientId:guid}"
@using NutriFoods_UI.Data.Dto
@using NutriFoods_UI.Services
@inject IPatientService PatientService



<nav class="mb-4" aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item "><a class="bi bi-arrow-left" href="/patients"> Pacientes</a></li>
    <li class="breadcrumb-item active" aria-current="page">Perfil de Ariel Pinto</li>
  </ol>
</nav>

@if (Consultations.Any())
{
  <h2 class="mb-6 mt-10 ml-2 fw-bold">Perfil de Ariel Pinto</h2>

  <TabNavegation></TabNavegation>
}

else
{
  <EmptyPatientData PatientId="PatientId"></EmptyPatientData>
}


@code {
    
  [Parameter]
  public Guid PatientId { get; set; }

  public IEnumerable<ConsultationDto> Consultations { get; set; } = new List<ConsultationDto>();

  protected override async Task OnInitializedAsync()
  {
    var response = await PatientService.FindConsultations(PatientId);
    Consultations = await response.Content.ReadFromJsonAsync<IEnumerable<ConsultationDto>>();
  }

  
}

